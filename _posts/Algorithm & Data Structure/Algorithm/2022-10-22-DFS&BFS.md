---
title: "[Algorithm] DFS&BFS"
categories:
  - Algorithm
tags:
  - [algorithm, dfs&bfs]

toc: true
toc_sticky: true
toc_label: "Content"
toc_icon: "sticky-note"
---

ğŸ“£<br>
ë³¸ í¬ìŠ¤íŠ¸ëŠ” 'ì´ê²ƒì´ ì·¨ì—…ì„ ìœ„í•œ ì½”ë”© í…ŒìŠ¤íŠ¸ë‹¤ with íŒŒì´ì¬'ì„ ê³µë¶€í•˜ê³  ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤ :)    
click > [(ì´ì½”í…Œ 2021) ì´ê²ƒì´ ì·¨ì—…ì„ ìœ„í•œ ì½”ë”© í…ŒìŠ¤íŠ¸ë‹¤ with íŒŒì´ì¬](https://www.youtube.com/watch?v=m-9pAwq1o3w)
{: .notice--primary}

# DFS/BFS

## ì´ë¡ 

- **íƒìƒ‰(Search)**
    
    ë§ì€ ì–‘ì˜ ë°ì´í„° ì¤‘ì—ì„œ ì›í•˜ëŠ” ë°ì´í„°ë¥¼ ì°¾ëŠ” ê³¼ì • â†’ ê·¸ë˜í”„, íŠ¸ë¦¬ ë“±ì˜ ìë£Œêµ¬ì¡°ì—ì„œ ë§ì´ ë‹¤ë£¬ë‹¤. 
    

### **ìë£Œêµ¬ì¡°([Data Structure](https://www.notion.so/8deafeaa6c624cf1b36daad9c29963e4))**

ë°ì´í„°ë¥¼ í‘œí˜„í•˜ê³  ê´€ë¦¬í•˜ê³  ì²˜ë¦¬í•˜ê¸° ìœ„í•œ êµ¬ì¡°

- **Stack** : ì„ ì… í›„ì¶œ (First In Last Out) or í›„ì… ì„ ì¶œ (Last In First Out)
    - [ì˜ˆì œ 5-1] ìŠ¤íƒ ì˜ˆì œ
        
        ```python
        # stack example
        
        stack = []
        
        # ì‚½ì…(5)-ì‚½ì…(2)-ì‚½ì…(3)-ì‚½ì…(7)-ì‚­ì œ()-ì‚½ì…(1)-ì‚½ì…(4)-ì‚­ì œ()
        stack.append(5)
        stack.append(2)
        stack.append(3)
        stack.append(7)
        stack.pop()
        stack.append(1)
        stack.append(4)
        stack.pop()
        
        print(stack) # ìµœí•˜ë‹¨ ì›ì†Œë¶€í„°
        print(stack[::-1]) # ìµœìƒë‹¨ ì›ì†Œë¶€í„°
        ```
        
- **Queue** : ì„ ì… ì„ ì¶œ (First In First Out)
    - [ì˜ˆì œ 5-2] í ì˜ˆì œ
        
        ```python
        from collections import deque
        
        # í êµ¬í˜„ì„ ìœ„í•´ deque ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©
        queue = deque()
        
        # ì‚½ì…(5)-ì‚½ì…(2)-ì‚½ì…(3)-ì‚½ì…(7)-ì‚­ì œ()-ì‚½ì…(1)-ì‚½ì…(4)-ì‚­ì œ()
        queue.append(5)
        queue.append(2)
        queue.append(3)
        queue.append(7)
        queue.popleft()
        queue.append(1)
        queue.append(4)
        queue.popleft()
        
        print(queue) # ë¨¼ì € ë“¤ì–´ì˜¨ ìˆœì„œëŒ€ë¡œ ì¶œë ¥
        queue.reverse() # ì—­ìˆœìœ¼ë¡œ ì¬ì •ë ¬
        print(queue) # ë‚˜ì¤‘ì— ë“¤ì–´ì˜¨ ì›ì†Œë¶€í„° ì¶œë ¥
        ```
        
- **Recursive Function** : ìê¸° ìì‹ ì„ í˜¸ì¶œí•˜ëŠ” í•¨ìˆ˜
    - [ì˜ˆì œ 5-3] ì¬ê·€í•¨ìˆ˜ ì˜ˆì œ
        
        ```python
        def factorial_iterative(n):
            result = 1
            for i in range(1,n+1):
                result *= i
            return result
        
        def factorial_recursive(n):
            if n <= 1:
                return 1
            return n * factorial_recursive(n-1)
        
        print(factorial_iterative(5))
        print(factorial_recursive(5))
        ```
        
- **Graphì˜ ê¸°ë³¸ êµ¬ì¡°**
    
    ![image](https://user-images.githubusercontent.com/68420044/197336356-84976d57-d434-4d67-8cd8-ecbc1d7dff92.png){: width="200" height="200"}
    
    - ë…¸ë“œ (Node) : ì •ì (Vertex)ë¼ê³ ë„ í•œë‹¤.
    - ê°„ì„  (Edge) : ë‘ ë…¸ë“œë¥¼ ì—°ê²°í•œë‹¤.
- **Graphì˜ í‘œí˜„ ë°©ì‹**
    - ì¸ì ‘ í–‰ë ¬ (Adjacency Matrix) : 2ì°¨ì› ë°°ì—´ë¡œ í‘œí˜„
        - ëª¨ë“  ê´€ê³„ë¥¼ ì €ì¥í•˜ë¯€ë¡œ ë©”ëª¨ë¦¬ ë§ì´ ì‚¬ìš©
        - [ì˜ˆì œ 5-4] ì¸ì ‘ í–‰ë ¬ ì˜ˆì œ
            
            ```python
            INF = 999999999
            
            # 2ì°¨ì› ë¦¬ìŠ¤íŠ¸ë¥¼ ì´ìš©í•˜ì—¬ ì¸ì ‘í–‰ë ¬ í‘œí˜„
            graph = [
                [0, 7, 5],
                [7, 0, INF],
                [5, INF, 0]
            ]
            
            print(graph)
            ```
            
    - ì¸ì ‘ ë¦¬ìŠ¤íŠ¸ (Adjacency List) : ë¦¬ìŠ¤íŠ¸ë¡œ í‘œí˜„
        - íŠ¹ì • ë‘ ë…¸ë“œê°€ ì—°ê²°ë˜ì–´ ìˆëŠ”ì§€ì— ëŒ€í•œ ì •ë³´ ì–»ëŠ” ì†ë„ ëŠë¦¼
        - [ì˜ˆì œ 5-5] ì¸ì ‘ ë¦¬ìŠ¤íŠ¸ ì˜ˆì œ
            
            ```python
            # í–‰ì´ 3ê°œì¸ 2ì°¨ì› ë¦¬ìŠ¤íŠ¸ë¡œ ì¸ì ‘ ë¦¬ìŠ¤íŠ¸ í‘œí˜„
            graph = [[] for _ in range(3)]
            
            # ë…¸ë“œ 0ì— ì—°ê²°ëœ ë…¸ë“œ ì •ë³´ ì €ì¥(ë…¸ë“œ, ê±°ë¦¬)
            graph[0].append((1,7))
            graph[0].append((2,5))
            
            # ë…¸ë“œ 1ì— ì—°ê²°ëœ ë…¸ë“œ ì •ë³´ ì €ì¥(ë…¸ë“œ, ê±°ë¦¬)
            graph[1].append((0,7))
            
            # ë…¸ë“œ 2ì— ì—°ê²°ëœ ë…¸ë“œ ì •ë³´ ì €ì¥(ë…¸ë“œ, ê±°ë¦¬)
            graph[2].append((0,5))
            
            print(graph)
            ```
            

### **DFS(Depth-First Search)**

ê¹Šì´ ìš°ì„  íƒìƒ‰ìœ¼ë¡œ ê·¸ë˜í”„ì—ì„œ ê¹Šì€ ë¶€ë¶„ì„ ë¨¼ì € íƒìƒ‰í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ Stack ìë£Œêµ¬ì¡°ë¥¼ ì´ìš©í•œë‹¤. 

1. íƒìƒ‰ ì‹œì‘ ë…¸ë“œë¥¼ ìŠ¤íƒì— ì‚½ì…í•˜ê³  ë°©ë¬¸ì²˜ë¦¬ë¥¼ í•œë‹¤. 
2. ìŠ¤íƒì˜ ìµœìƒë‹¨ ë…¸ë“œì— ë°©ë¬¸í•˜ì§€ ì•Šì€ ì¸ì ‘ ë…¸ë“œê°€ ìˆìœ¼ë©´ ê·¸ ì¸ì ‘ ë…¸ë“œë¥¼ ìŠ¤íƒì— ë„£ê³  ë°©ë¬¸ ì²˜ë¦¬ë¥¼ í•œë‹¤.  ë°˜ë¬¸í•˜ì§€ ì•Šì€ ì¸ì ‘ ë…¸ë“œê°€ ì—†ìœ¼ë©´ ìŠ¤íƒì—ì„œ ìµœìƒë‹¨ ë…¸ë“œë¥¼ êº¼ë‚¸ë‹¤.  
3. 2ì˜ ê³¼ì •ì„ ë” ì´ìƒ ìˆ˜í–‰í•  ìˆ˜ ì—†ì„ ë•Œê¹Œì§€ ë°˜ë³µí•œë‹¤.

ë°ì´í„° ê°œìˆ˜ê°€ Nê°œì¸ ê²½ìš° O(N)ì˜ ì‹œê°„ ë³µì¡ë„ë¥¼ ê°€ì§„ë‹¤. 

- [ì˜ˆì œ 5-6] DFS ì˜ˆì œ
    
    ```python
    # DFS ë©”ì„œë“œ ì •ì˜
    def dfs(graph, v, visited):
        # í˜„ì¬ ë…¸ë“œë¥¼ ë°©ë¬¸ ì²˜ë¦¬
        visited[v] = True
        print(v, end=' ')
        # í˜„ì¬ ë…¸ë“œì™€ ì—°ê²°ëœ ë‹¤ë¥¸ ë…¸ë“œë¥¼ ì¬ê·€ì ìœ¼ë¡œ ë°©ë¬¸
        for i in graph[v]:
            if not visited[i]:
                dfs(graph, i, visited)
    
    # ê° ë…¸ë“œê°€ ì—°ê²°ëœ ì •ë³´ë¥¼ ë¦¬ìŠ¤íŠ¸ ìë£Œí˜•ìœ¼ë¡œ í‘œí˜„(2ì°¨ì› ë¦¬ìŠ¤íŠ¸)
    graph = [
        [],
        [2,3,8],
        [1,7],
        [1,4,5],
        [3,5],
        [3,4],
        [7],
        [2,6,8],
        [1,7]
    ]
    
    # ê° ë…¸ë“œê°€ ë°©ë¬¸ëœ ì •ë³´ë¥¼ ë¦¬ìŠ¤íŠ¸ ìë£Œ
    # í˜•ìœ¼ë¡œ í‘œí˜„(1ì°¨ì› ë¦¬ìŠ¤íŠ¸)
    visited = [False] * 9
    
    # ì •ì˜ëœ DFS í•¨ìˆ˜ í˜¸ì¶œ
    dfs(graph, 1, visited)
    ```
    

### **BFS(Breadth First Search)**

ë„ˆë¹„ ìš°ì„  íƒìƒ‰ìœ¼ë¡œ ê°€ê¹Œìš´ ë…¸ë“œë¶€í„° íƒìƒ‰í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ Queue ìë£Œêµ¬ì¡°ë¥¼ ì´ìš©í•œë‹¤. 

1. íƒìƒ‰ ì‹œì‘ ë…¸ë“œë¥¼ íì— ì‚½ì…í•˜ê³  ë°©ë¬¸ ì²˜ë¦¬ë¥¼ í•œë‹¤. 
2. íì—ì„œ ë…¸ë“œë¥¼ êº¼ë‚´ í•´ë‹¹ ë…¸ë“œì˜ ì¸ì ‘ ë…¸ë“œ ì¤‘ì—ì„œ ë°©ë¬¸í•˜ì§€ ì•Šì€ ë…¸ë“œë¥¼ ëª¨ë‘ íì— ì‚½ì…í•˜ê³  ë°©ë¬¸ ì²˜ë¦¬ë¥¼ í•œë‹¤.
3. 2ì˜ ê³¼ì •ì„ ë” ì´ìƒ ìˆ˜í–‰í•  ìˆ˜ ì—†ì„ ë•Œê¹Œì§€ ë°˜ë³µí•œë‹¤. 

 ë°ì´í„° ê°œìˆ˜ê°€ Nê°œì¸ ê²½ìš° O(N)ì˜ ì‹œê°„ ë³µì¡ë„ë¥¼ ê°€ì§€ë©°, ì‹¤ì œ ìˆ˜í–‰ ì‹œê°„ì€ DFSë³´ë‹¤ ì¢‹ì€ í¸ì´ë‹¤.

- [ì˜ˆì œ 5-7] BFS ì˜ˆì œ
    
    ```python
    from collections import deque
    
    # BFS ë©”ì„œë“œ ì •ì˜
    def bfs(graph, start, visited):
        # í êµ¬í˜„ì„ ìœ„í•´ deque ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©
        queue = deque([start])
        # í˜„ì¬ ë…¸ë“œë¥¼ ë°©ë¬¸ì²˜ë¦¬
        visited[start] = True
        # íê°€ ë¹Œë•Œê¹Œì§€ ë°˜ë³µ
        while queue:
            # íì—ì„œ í•˜ë‚˜ì˜ ì›ì†Œë¥¼ ë½‘ì•„ ì¶œë ¥
            v = queue.popleft()
            print(v, end=" ")
            # í•´ë‹¹ ì›ì†Œì™€ ì—°ê²°ëœ, ì•„ì§ ë°©ë¬¸í•˜ì§€ ì•Šì€ ì›ì†Œë“¤ì„ íì— ì‚½ì…
            for i in graph[v]:
                if not visited[i]:
                    queue.append(i)
                    visited[i] = True
    
    # ê° ë…¸ë“œê°€ ì—°ê²°ëœ ì •ë³´ë¥¼ ë¦¬ìŠ¤íŠ¸ ìë£Œí˜•ìœ¼ë¡œ í‘œí˜„(2ì°¨ì› ë¦¬ìŠ¤íŠ¸)
    graph = [
        [],
        [2,3,8],
        [1,7],
        [1,4,5],
        [3,5],
        [3,4],
        [7],
        [2,6,8],
        [1,7]
    ]
    
    # ê° ë…¸ë“œê°€ ë°©ë¬¸ëœ ì •ë³´ë¥¼ ë¦¬ìŠ¤íŠ¸ ìë£Œ
    # í˜•ìœ¼ë¡œ í‘œí˜„(1ì°¨ì› ë¦¬ìŠ¤íŠ¸)
    visited = [False] * 9
    
    # ì •ì˜ëœ DFS í•¨ìˆ˜ í˜¸ì¶œ
    bfs(graph, 1, visited)
    ```

## ì‹¤ì „ë¬¸ì œ

### [ì‹¤ì „ë¬¸ì œ 1] ìŒë£Œìˆ˜ ì–¼ë ¤ ë¨¹ê¸°

```python
N, M = map(int, input().split())

graph = []
for i in range(N):
    graph.append(list(map(int, input())))

# DFSë¡œ íŠ¹ì •í•œ ë…¸ë“œë¥¼ ë°©ë¬¸í•œ ë’¤ì— ì—°ê²°ëœ ëª¨ë“  ë…¸ë“œë“¤ë„ ë°©ë¬¸
def dfs(x,y):
    if x <= -1 or x >= N or y <= -1 or y >= N:
        return False
    if graph[x][y] == 0:
        graph[x][y] = 1
        dfs(x - 1, y)
        dfs(x, y - 1)
        dfs(x + 1, y)
        dfs(x, y + 1)
    return False

result = 0
for i in range(N):
    for j in range(M):
        if dfs(i,j) == True:
            result += 1

print(result)
```

### [ì‹¤ì „ ë¬¸ì œ 2] ë¯¸ë¡œ íƒˆì¶œ

```python
from collections import deque

# N, Mì„ ê³µë°±ìœ¼ë¡œ êµ¬ë¶„í•˜ì—¬ ì…ë ¥ë°›ê¸°
n, m = map(int, input().split())
# 2ì°¨ì› ë¦¬ìŠ¤íŠ¸ì˜ ë§µ ì •ë³´ ì…ë ¥ë°›ê¸°
graph = []
for i in range(n):
    graph.append(list(map(int, input())))

# ì´ë™í•  ë„¤ ë°©í–¥ ì •ì˜
dx = [-1, 1, 0, 0]
dy = [0, 0, -1, 1]

# BFS êµ¬í˜„
def bfs(x, y):
    # í êµ¬í˜„ì„ ìœ„í•´ deque ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©
    queue = deque()
    queue.append((x,y))
    # íê°€ ë¹Œ ë•Œê¹Œì§€ ë°˜ë³µ
    while queue:
        x, y = queue.popleft()
        # í˜„ì¬ ìœ„ì¹˜ì—ì„œ ë„¤ ë°©í–¥ìœ¼ë¡œ ìœ„ì¹˜ í™•ì¸
        for i in range(4):
            nx = x + dx[i]
            ny = y + dy[i]
            if nx < 0 or ny < 0 or nx >= n or ny >= m:
                continue
            if graph[nx][ny] == 0:
                continue
            # í•´ë‹¹ ë…¸ë“œë¥¼ ì²˜ìŒ ë°©ë¬¸í•˜ëŠ” ê²½ìš° ìµœë‹¨ ê±°ë¦¬ ê¸°ë¡
            if graph[nx][ny] == 1:
                graph[nx][ny] = graph[x][y] + 1
                queue.append((nx,ny))
    # ê°€ì¥ ì˜¤ë¥¸ìª½ ì•„ë˜(n,m)ê¹Œì§€ ìµœë‹¨ ê±°ë¦¬ ë°˜í™˜
    return graph[n-1][m-1]

print(bfs(0,0))
```